import{u as S,q as $}from"./Bgx8d-J7.js";import{at as I,au as O,av as R,aw as _,U as f,ax as v,Q as T,u as q,m,i as g}from"./CLkQFPB8.js";const M=(e,t)=>e.reduce((o,n)=>{const a=t(n);return o[a]||(o[a]=[]),o[a].push(n),o},{}),j=(e,t,o=!1)=>{if(!e)return[];const n=(r,s)=>t(r)-t(s),a=(r,s)=>t(s)-t(r);return e.slice().sort(o===!0?a:n)},k=(e,t,o="asc")=>{if(!e)return[];const n=(r,s)=>`${t(r)}`.localeCompare(t(s)),a=(r,s)=>`${t(s)}`.localeCompare(t(r));return e.slice().sort(o==="desc"?a:n)},d=new WeakMap;function z(e,t,o={}){const{mode:n="replace",route:a=I(),router:r=O(),transform:s}=o;let p=c=>c,y=c=>c;typeof s=="function"?p=s:s&&(s.get&&(p=s.get),s.set&&(y=s.set)),d.has(r)||d.set(r,new Map);const l=d.get(r);let u=a.query[e];R(()=>{u=void 0});let h;const x=_((c,C)=>(h=C,{get(){return c(),p(u!==void 0?u:f(t))},set(i){i=y(i),u!==i&&(u=i===f(t)?void 0:i,l.set(e,i===f(t)?void 0:i),C(),v(()=>{if(l.size===0)return;const w=Object.fromEntries(l.entries());l.clear();const{params:b,query:A,hash:Q}=a;r[f(n)]({params:b,query:{...A,...w},hash:Q})}))}}));return T(()=>a.query[e],c=>{u!==p(c)&&(u=c,h())},{flush:"sync"}),x}function G(e="posts/%"){return S(`index_${e}`,()=>$("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all(),{default:()=>[]})}function K(e,t){const{bindQuery:o}=t??{},n=o?z(o,void 0,{transform:s=>s,mode:"push"}):m(),a=g(()=>[...new Set(f(e).map(s=>s.categories?.[0]))]),r=g(()=>f(e).filter(s=>!n.value||s.categories?.[0]===n.value));return{category:n,categories:a,listCategorized:r}}function L(e){const t=q(),o=m(t.pagination.sortOrder||"date"),n=m(),a=g(()=>k(f(e),r=>r[o.value]||"",n.value?"asc":"desc"));return{sortOrder:o,isAscending:n,listSorted:a}}function N(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function P(e,t={prefix:"text"}){e||(e="tech");const{prefix:o}=t;return`${o}-${e}`}export{G as a,L as b,K as c,N as d,P as e,M as g,j as s,z as u};
