import{aw as M,M as Q,ax as _,ay as j,aj as i,az as k,w as z}from"./DWvkbwql.js";const y=new WeakMap;function S(a,c,w={}){const{mode:h="replace",route:f=M(),router:o=Q(),transform:t}=w;let u=e=>e,p=e=>e;typeof t=="function"?u=t:t&&(t.get&&(u=t.get),t.set&&(p=t.set)),y.has(o)||y.set(o,new Map);const n=y.get(o);let r=f.query[a];_(()=>{r=void 0});let q;const l=j((e,m)=>(q=m,{get(){return e(),u(r!==void 0?r:i(c))},set(s){s=p(s),r!==s&&(r=s===i(c)?void 0:s,n.set(a,s===i(c)?void 0:s),m(),k(()=>{if(n.size===0)return;const g=Object.fromEntries(n.entries());n.clear();const{params:x,query:R,hash:d}=f;o[i(h)]({params:x,query:{...R,...g},hash:d})}))}}));return z(()=>f.query[a],e=>{r!==u(e)&&(r=e,q())},{flush:"sync"}),l}export{S as u};
