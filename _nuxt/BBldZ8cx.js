import{ax as k,M,ay as Q,az as _,ak as i,aA as z,w as O}from"./Ckr-UtRO.js";const y=new WeakMap;function b(a,c,h={}){const{mode:l="replace",route:f=k(),router:o=M(),transform:t}=h;let u=e=>e,p=e=>e;typeof t=="function"?u=t:t&&(t.get&&(u=t.get),t.set&&(p=t.set)),y.has(o)||y.set(o,new Map);const n=y.get(o);let r=f.query[a];Q(()=>{r=void 0});let q;const w=_((e,m)=>(q=m,{get(){return e(),u(r!==void 0?r:i(c))},set(s){s=p(s),r!==s&&(r=s===i(c)?void 0:s,n.set(a,s===i(c)?void 0:s),m(),z(()=>{if(n.size===0)return;const g=Object.fromEntries(n.entries());n.clear();const{params:x,query:R,hash:d}=f;o[i(l)]({params:x,query:{...R,...g},hash:d})}))}}));return O(()=>f.query[a],e=>{r!==u(e)&&(r=e,q())},{flush:"sync"}),w}export{b as u};
